# 22. this

## 22.1 this 키워드
- 객체와 메서드 기본 구조
    - 객체(Object): 상태(데이터)를 나타내는 프로퍼티와 동작(기능)을 나타내는 메서드를 하나의 단위로 묶은 복합 자료구조

- 객체 리터럴 방식에서의 한계
    - 메서드 안에서 객체명(circle)을 직접 참조할 수는 있으나, 이 방식은 유연성이 떨어지고 일반적이지 않음

- 생성자 함수 방식의 한계와 this의 필요성
    - 생성자 함수 안에서는 객체가 아직 생성되지 않았기 때문에 객체명으로 직접 참조할 수 없음
    -> 이를 해결하기 위해 자바스크립트는 this라는 특수한 식별자를 제공함

- this의 역할과 바인딩
    - this란?
    : 자신이 속한 객체 또는 생성될 인스턴스를 참조하는 자기 참조 변수 (self-referencing variable)
    - 자신이 속한 객체 또는 자신이 생성할 인스턴스의 프로퍼티나 메서드를 참조 가능
    - 함수가 호출될 때 동적으로 바인딩되며, 함수 호출 방식에 따라 가리키는 대상이 달라짐
    - 함수 내부에서는 arguments와 마찬가지로 지역 변수처럼 사용 가능

- this 바인딩 예시
    - 객체 리터럴 메서드: this는 메서드를 호출한 객체를 가리킴
    - 생성자 함수 내부: this는 생성될 인스턴스를 가리킴
    - 전역 함수 또는 일반 함수:
        - 비엄격 모드: this는 **전역 객체 (브라우저에서는 window)**를 가리킴
        - 엄격 모드(strict mode): this는 **undefined**로 바인딩됨
    - 메서드로 호출될 경우: 호출한 객체 자체가 this가 됨

## 22.2 함수 호출 방식과 this 바인딩
- 일반 함수 호출에서는 this가 전역 객체(window)를 가리킴 
: strict mode에서는 undefined가 바인딩됨

- 메서드 호출(this.key)에서는 this가 해당 메서드를 호출한 객체를 가리킴
    - BUT, 메서드를 다른 객체에 재할당하거나 일반 변수에 저장하면, this는 원래 객체가 아닌 실제 호출한 객체로 바인딩됨

- 생성자 함수 호출에서는 this가 새롭게 생성되는 인스턴스를 가리킴
    - new 없이 호출하면 일반 함수로 동작하고, this는 전역 객체를 가리키게 됨

- **call/apply/bind 메서드**로 함수를 호출하면, 첫 번째 인자로 넘긴 객체가 this로 바인딩됨
    - call은 인수를 쉼표로 구분하여 전달함
    - apply는 인수를 배열로 묶어 전달함
    - bind는 함수를 호출하지 않고, 지정된 this를 유지한 새로운 함수를 반환함
- 화살표 함수는 this 바인딩이 고정되어 있으며, 자신의 상위 스코프의 this를 그대로 사용함

- this 바인딩 문제 해결 방법
    - 중첩 함수나 콜백 함수에서 this가 의도와 다르게 전역 객체를 참조하는 문제는 다음과 같이 해결 가능함
        - this를 다른 변수(that)에 저장해 사용하는 방식
        - bind(this)를 사용하여 this를 고정시키는 방식
        - 화살표 함수를 사용하여 상위 스코프의 this를 그대로 유지하는 방식

(사진)