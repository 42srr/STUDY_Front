[모던 자바스크립트 Deep Dive]
[15장] let, const 키워드와 블록 레벨 스코프

---

### 1. var 키워드로 선언한 변수의 문제점

#### 변수 중복 선언 허용

- var 키워드로 선언한 변수는 중복 선언이 가능함

	- 의도치 않게 먼저 선언된 값이 변경될 수 있음

#### 함수 레벨 스코프

- 함수 외부에서 var 키워드로 선언한 변수는 코드 블록 내에서 선언해도 모두 전역 변수가 됨
	
	- 의도치 않게 전역 변수가 중복 선언될 수 있음

#### 변수 호이스팅

- 변수 호이스팅에 의해 var 키워드로 선언한 변수는 변수 선언문 이전에 참조할 수 있으며, 할당문 이전에 변수를 참조하면 언제나 undefined를 반환함

	- 에러는 없지만 흐름상 맞지 않고 가독성을 떨어뜨리며 오류 발생 여지가 있음

---

### 2. let 키워드

- let, const 키워드

	- var 키워드의 단점을 보완하기 위해 ES6에서는 새로운 변수 선언 키워드를 도입함

#### 변수 중복 선언 금지

- let 키워드로 이름이 같은 변수를 중복 선언하면 문법 에러가 발생함

	- var 키워드는 중복 선언이 가능하며, 재할당됨

#### 블록 레벨 스코프

- let 키워드로 선언한 변수는 모든 코드 블록을 지역 스코프로 인정하는 블록 레벨 스코프를 따름

	- var 키워드는 오로지 함수의 코드 블록만을 지역 스코프로 인정하는 함수 레벨 스코프를 따름

#### 변수 호이스팅

- let 변수는 선언, 초기화 단계가 분리되어 진행됨 (변수 호이스팅 O이지만, X처럼 동작) (+ const, class)

	- 런타임 이전에 자바스크립트 엔진에 의해 암묵적으로 선언 단계가 실행되지만, 변수 선언문에 도달했을 때 초기화 단계가 실행됨
	
	- 선언 단계 > 일시적 사각지대 > 초기화 단계 > 할당 단계
	
	- let foo = 1; { console.log(foo); let foo = 2; } -> 호이스팅 발생으로 참조 에러
	
	- var 변수는 런타임 이전에 자바스크립트 엔진에 의해 암묵적으로 선언, 초기화 단계가 한번에 진행됨

- 일시적 사각지대

	- 스코프의 시작 지점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간

#### 전역 객체와 let

- var 전역 변수, 전역 함수, 암묵적 전역은 객체 window의 프로퍼티가 됨

	- 전역 객체의 프로퍼티를 참조할 때 window를 생략 가능함

	- var x = 1; / function foo() / {} y = 1;
	
- let 전역 변수는 전역 객체의 프로퍼티가 아님

	- 보이지 않은 개념적인 블록(전역 렉시컬 환경의 선언적 환경 레코드) 내에 존재함

---

### 3. const 키워드

- const 키워드

	- 상수를 선언하기 위해 사용

#### 선언과 초기화

- const 키워드 선언 변수는 반드시 선언과 동시에 초기화해야 함
	
	- const foo = 1;
		
- const 키워드 선언 변수는 블록 레벨 스코프를 가지며, 변수 호이스팅이 발생하지 않는 것처럼 동작함 (= let 키워드 선언 변수)

	- console.log(foo); const foo = 1; -> ReferenceError

#### 재할당 금지

- const 키워드 선언 변수는 재할당이 금지됨

	- 재할당을 금지할 뿐(상수), 불변을 의미하지 않음(객체)

	- var, let 키워드 선언 변수는 재할당이 자유로움
	
#### 상수

- const 키워드 선언 변수에 원시 값을 할당한 경우 변수 값은 변경 불가능함

	- 원시 값은 변경 불가능한 값으로, 재할당 없인 방법이 없음
	
	- 변수는 재할당이 있지만, const에 의해 재할당이 금지된 상수가 됨

- 상수

	- 재할당이 금지된 변수
	
		- ex. const TAX_RATE = 0.1;

#### const 키워드와 객체

- const 키워드 선언 변수에 객체를 할당한 경우 값을 변경 가능함

	- 객체는 재할당 없이도 직접 변경이 가능하기 때문임
	
	- 객체가 변경돼도 변수에 할당된 참조 값은 변경되지 않음
	
	- const person = { name:'Lee' }; person.name = "Kim";

---

### 4. var vs. let vs. const

- const

	- 변수 선언에 기본적으로 사용, 의도치 않은 재할당 방지
	
- var, let

	- 재할당이 필요한 경우에 한정해 사용

- 권장 사항

	- ES6를 사용한다면 var 키워드는 사용하지 말 것
	
	- 재할당 필요한 경우에 한정해 let 키워드 사용 (최소 스코프)
	
	- 변경이 발생하지 않고 읽기 전용으로 사용하는 원시 값과 객체에는 const 키워드 사용
	
---
